{"version":3,"sources":["yelp.js"],"names":["API_KEY","termEl","document","getElementById","locationEl","searchBtn","resultsEl","YelpMarkersArray","addEventListener","e","preventDefault","queryTerm","value","location","prices","getCheckedValues","querySelectorAll","searchYelp","checkedItems","console","log","allChecked","i","length","checkedItem","displayBusinesses","businessArray","innerHTML","currentBusiness","currentBusinessLocation","liEl","createElement","aEl","imgEl","pAddressEl","p$El","pRatingEl","style","width","coordinatesLat","coordinates","latitude","coordinatesLong","longitude","name","href","url","src","image_url","address1","city","state","zip_code","price","rating","appendChild","push","lat","lng","GoogleMapModule","showMarkers","axios","get","params","headers","then","response","data","businesses"],"mappings":"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","file":"yelp.js","sourcesContent":["(function(){\n\n\t\t\t\t\n\t\t\t\tconst API_KEY = 'xICUj5FsqM8P6cfNhFQEYwtYzrv75F4WEqj-Hns-fUTZgyLOzQBVyr01f9g3p-5P3J9S7LkrGhLEWjqi7t_ZHoZedrj9zV1E34GIIu1nLLF814cws_futxGtRGPiWnYx';\n\t\t\t\t\t\t\t\n\n\t\t\t\tconst termEl = document.getElementById('term');\n\t\t\t\tconst locationEl = document.getElementById('location');\n\t\t\t\tconst searchBtn = document.getElementById('search');\n\t\t\t\tconst resultsEl = document.getElementById('results');\n\n\n\t\t\t\tvar YelpMarkersArray = [];\n\t\t\t\t  \n\n\n\t\t\t\tsearchBtn.addEventListener(\"click\", function(e) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tconst queryTerm = termEl.value;\n\t\t\t\t\tconst location = locationEl.value;\n\t\t\t\t\tconst prices = getCheckedValues(document.querySelectorAll('[name=price]:checked'));\n\n\t\t\t\t\tsearchYelp(location, queryTerm, prices);\n\t\t\t\t})\n\n\t\t\t\tfunction getCheckedValues(checkedItems){\n\t\t\t\t\tconsole.log('checked', checkedItems);\n\n\t\t\t\t\tlet allChecked = '';\n\t\t\t\t\tfor (var i = checkedItems.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tvar checkedItem = checkedItems[i];\n\t\t\t\t\t\tallChecked = allChecked + ', ' + checkedItem;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn allChecked;\n\t\t\t\t}\n\n\t\t\t\tfunction displayBusinesses(businessArray){\n\t\t\t\t\t\n\t\t\t\t\tresultsEl.innerHTML = '';\n\t\t\t\t\t\n\n\n\t\t\t\t\tfor (var i = 0; i <= businessArray.length - 1; i++) {\n\t\t\t\t\t\t\n\n\t\t\t\t\t\tconst currentBusiness = businessArray[i];\n\t\t\t\t\t\tconst currentBusinessLocation = businessArray[i].location;\n\t\t\t\t\t\tlet liEl = document.createElement('li');\n\t\t\t\t\t\tlet aEl = document.createElement('a');\n\t\t\t\t\t\tlet imgEl = document.createElement('img');\n\t\t\t\t\t\tlet pAddressEl = document.createElement('p');\n\t\t\t\t\t\tlet p$El = document.createElement('p');\n\t\t\t\t\t\tlet pRatingEl = document.createElement('p');\n\t\t\t\t\t\timgEl.style.width = \"200px\";\n\t\t\t\t\t\tlet coordinatesLat = currentBusiness.coordinates.latitude;\n\t\t\t\t\t\tlet coordinatesLong = currentBusiness.coordinates.longitude;\n\t\n\n\t\n\t\t\t\t\t\taEl.innerHTML = currentBusiness.name;\n\t\t\t\t\t\taEl.href = currentBusiness.url;\n\t\t\t\t\t\timgEl.src = currentBusiness.image_url;\n\t\t\t\t\t\tpAddressEl.innerHTML = currentBusinessLocation.address1 + \"<br/>\" + currentBusinessLocation.city + \", \" + currentBusinessLocation.state + \" \" + currentBusinessLocation.zip_code; \n\t\t\t\t\t\tp$El.innerHTML = currentBusiness.price;\n\t\t\t\t\t\tpRatingEl.innerHTML = \"Rating \" + currentBusiness.rating;\n\n\t\t\t\t\t\tliEl.appendChild(aEl);\n\t\t\t\t\t\tliEl.appendChild(imgEl);\n\t\t\t\t\t\tliEl.appendChild(pAddressEl);\n\t\t\t\t\t\tliEl.appendChild(p$El);\n\t\t\t\t\t\tliEl.appendChild(pRatingEl);\n\n\t\t\t\t\t\tresultsEl.appendChild(liEl);\n\n\n\t\t\t\t\t\tYelpMarkersArray.push( {\n\t\t\t\t\t\t\tlat: coordinatesLat,\n\t\t\t\t\t\t\tlng: coordinatesLong\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\n\t\t\t\t\t\tGoogleMapModule.showMarkers(YelpMarkersArray);\n\t\t\t\t\t}\n\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\n\t\t\t\tfunction searchYelp(location, queryTerm, prices) {\n\t\t\t\t\taxios.get(\"https://circuslabs.net/proxies/yelp-fusion-proxy/\", {\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t'_ep': '/businesses/search',\n\t\t\t\t\t\t\t'term': queryTerm,\n\t\t\t\t\t\t\t'location': location,\n\t\t\t\t\t\t},\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Authorization': 'Bearer ' + API_KEY\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.then(function(response){\n\t\t\t\t\t\tconsole.log('here is the get response data for key:', response.data, response);\n\t\t\t\t\t\tdisplayBusinesses(response.data.businesses);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t})()\n"]}